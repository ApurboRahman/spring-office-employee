<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sp.co.soe.emp.domain.repository.EmployeeInventoryChkMapper">
    <resultMap id="employeeInventoryChkHelper" type="sp.co.soe.emp.app.helper.EmployeeInventoryChkHelper">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Mar 30 00:37:11 JST 2020.
        -->
        <result column="employee_id" jdbcType="VARCHAR" property="employeeId"/>
        <result column="first_name" jdbcType="VARCHAR" property="firstName"/>
        <result column="last_name" jdbcType="VARCHAR" property="lastName"/>
        <result column="grade_code" jdbcType="VARCHAR" property="gradeCode"/>
        <result column="post_code" jdbcType="VARCHAR" property="postCode"/>
        <result column="dept_code" jdbcType="VARCHAR" property="deptCode"/>
        <result column="sex" jdbcType="CHAR" property="sex"/>
        <result column="union_name" jdbcType="VARCHAR" property="unionName"/>
        <result column="joining_date" jdbcType="DATE" property="joiningDate"/>
        <result column="retire_date" jdbcType="DATE" property="retireDate"/>
        <result column="delete_flg" jdbcType="VARCHAR" property="deleteFlg"/>
        <result column="mail_address" jdbcType="VARCHAR" property="mailAddress"/>
        <result column="comm_code" jdbcType="BIT" property="commCode"/>
        <result column="manage_flg" jdbcType="CHAR" property="manageFlg"/>
        <result column="create_user" jdbcType="VARCHAR" property="createUser"/>
        <result column="create_date" jdbcType="TIMESTAMP" property="createDate"/>
        <result column="create_pgid" jdbcType="VARCHAR" property="createPgid"/>
        <result column="update_user" jdbcType="VARCHAR" property="updateUser"/>
        <result column="update_date" jdbcType="TIMESTAMP" property="updateDate"/>
        <result column="update_pgid" jdbcType="VARCHAR" property="updatePgid"/>
    </resultMap>

    <select id="selectEmployeesForInventoryRequest" resultMap="employeeInventoryChkHelper">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Mar 30 00:37:11 JST 2020.
        -->
        SELECT E.* FROM employees_m E
        INNER JOIN cards_chk C ON E.employee_id = C.employee_id
        INNER JOIN dongles_chk D ON E.employee_id = D.employee_id
        <where>
            (C.chk_flg = #{checkFlag,jdbcType=CHAR} AND C.period_month =#{inventoryMonth,jdbcType=DATE})
            OR (D.chk_flg=#{checkFlag,jdbcType=CHAR} AND D.period_month=#{inventoryMonth,jdbcType=DATE})
        </where>
        ORDER BY E.employee_id;

    </select>


</mapper>